{% extends 'base.html' %}

{% block title %}Emergency{% endblock %}

{% block content %}
<style>
    .sos-button,
    .emergency-button {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        background-color: #FF6347; /* Red color for SOS */
        color: white;
        font-size: 18px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s ease;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        margin: 20px; /* Proper spacing between buttons */
    }

    .sos-button:hover,
    .emergency-button:hover {
        background-color: #FF0000; 
        transform: scale(1.05); 
    }

    .button-container {
        display: flex;
        justify-content: center; /* Align buttons to the center */
        margin-top: 20px; /* Add some top margin */
    }
</style>
<body>
    <div class="button-container">
        <button class="btn btn-danger sos-button" title="Send SOS signal to the police">SOS Immediate Alert</button>
        <button class="btn btn-danger emergency-button" title="Record and forward threat calls to the police">Emergency Call Record</button>
    </div>
    
    <script>
        // Function to trigger SOS signal to the police
    function triggerSOS() {
        alert('SOS signal sent to the police!');

        // Here you can make AJAX calls to notify the police backend system
        // Example AJAX call
        // Replace the URL with the actual endpoint to send the SOS signal
        // Replace the data with the actual data to be sent
        // Replace the success and error callbacks with your own logic

        // Make an AJAX POST request to the backend endpoint
        $.ajax({
            url: '/api/send-sos-signal', // Replace with the actual endpoint
            method: 'POST',
            data: {
                sosSignal: true // Replace with actual data if needed
            },
            success: function(response) {
                alert('SOS signal sent to the police successfully!');
            },
            error: function(error) {
                alert('Failed to send the SOS signal to the police.');
            }
        });
}


        // Function to record threat calls and forward them to the police
        function recordThreat() {
            var threatDetails = prompt('Please provide details of the threat:');
            if (threatDetails) {
                alert('Threat call recorded and forwarded to the police: ' + threatDetails);
                // Here you can make AJAX calls to record and forward the threat details to the police
                // Example AJAX call
                // Replace the URL with the actual endpoint to send the threat details
                // Replace the data with the actual data to be sent
                // Replace the success and error callbacks with your own logic
                $.ajax({
                    url: '/api/send-threat-details',
                    method: 'POST',
                    data: {
                        threatDetails: threatDetails
                    },
                    success: function(response) {
                        alert('Threat details recorded and forwarded to the police successfully!');
                    },
                    error: function(error) {
                        alert('Failed to record and forward the threat details to the police.');
                    }
                });
            }
        }

        // Attach click event listeners to the SOS and Emergency buttons
        document.querySelector('.sos-button').addEventListener('click', triggerSOS);
        document.querySelector('.emergency-button').addEventListener('click', recordThreat);
    </script>
</body>
</html>
{% endblock %}
